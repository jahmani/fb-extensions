<!-- <div *ngIf="!snapshot" style="position: relative;">
  <ion-thumbnail class="big-thumb ion-margin">
    <img [src]="safeDataUrl"  class="66">
  </ion-thumbnail>
</div> -->
<ng-container *ngIf="imgInfo.uploadTaskData">

  <ng-container *ngIf="slideMode; else thumbView">
    <div style="position: relative;">
      <ng-container *ngIf="imgInfo.uploadTaskData.snapshot ; else noUploadYet">
        <ion-fab vertical="top" horizontal="start" slot="fixed">
          <ion-fab-button (click)="onUploadCanceled($event)" size="big">
            <ion-icon name="close"></ion-icon>
            <ion-spinner *ngIf="!imgInfo.uploadTaskData.downloadURL" name="circular"></ion-spinner>

          </ion-fab-button>
        </ion-fab>
        <div class="spin">
        </div>
      </ng-container>
      <ng-template #noUploadYet>
        <ion-fab vertical="top" horizontal="start" slot="fixed">
          <ion-fab-button (click)="startUpload()" size="small">
            <ion-icon name="cloud-upload-outline"></ion-icon>
          </ion-fab-button>
          <ion-fab-button (click)="showEditPhoto()" size="small">
            <ion-icon name="create-outline"></ion-icon>
          </ion-fab-button>
          <ion-fab-button (click)="onUploadCanceled($event)" size="small">
            <ion-icon name="close"></ion-icon>
          </ion-fab-button>
        </ion-fab>
      </ng-template>
      <img #slideImgFile (load)="imgFileLoded(slideImgFile)" width="100%" [src]="dataUri" />
    </div>
  </ng-container>
  <ng-template #thumbView>
    <div style="position: relative;">
      <ng-container *ngIf="imgInfo.uploadTaskData.snapshot">
        <ion-fab vertical="top" horizontal="center" edge slot="fixed">
          <ion-fab-button (click)="onUploadCanceled($event)" size="small">
            <ion-icon name="close"></ion-icon>
          </ion-fab-button>
        </ion-fab>
        <div class="spin" *ngIf="!imgInfo.uploadTaskData.downloadURL">
          <ion-spinner name="circular"></ion-spinner>
        </div>
      </ng-container>
      <ion-thumbnail class="big-thumb" style="opacity: 0.6;">
        <ion-img [src]="dataUri" class="44"></ion-img>
      </ion-thumbnail>
    </div>
  </ng-template>
</ng-container>

<ion-modal #modal>
  <ng-template>
    <store-app-repository-image-crop-modal style="height: 100%;"
      [imgInfo]="imgInfo"></store-app-repository-image-crop-modal>
  </ng-template>
</ion-modal>