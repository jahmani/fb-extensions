<!-- <div *ngIf="!snapshot" style="position: relative;">
  <ion-thumbnail class="big-thumb ion-margin">
    <img [src]="safeDataUrl"  class="66">
  </ion-thumbnail>
</div> -->
<ng-container *ngIf="imgInfo.uploadTaskData">

    <ng-container *ngIf="slideMode; else elseTemplate">
      <div style="position: relative;" >
        <ng-container  *ngIf="imgInfo.uploadTaskData.snapshot ; else noUploadYet">
          <ion-fab vertical="top" horizontal="center" edge slot="fixed">
           <ion-fab-button (click)="onUploadCanceled()" size="small">
             <ion-icon name="close"></ion-icon>
           </ion-fab-button>
         </ion-fab>     
         <div class="spin" *ngIf="!imgInfo.uploadTaskData.downloadURL">
           <ion-spinner name="circular"></ion-spinner>
         </div>    
         </ng-container>
         <ng-template #noUploadYet>
           <ion-fab vertical="top" horizontal="start" slot="fixed">
            <ion-fab-button (click)="startUpload()" size="small">
              <ion-icon name="cloud-upload-outline"></ion-icon>
            </ion-fab-button>
            <ion-fab-button (click)="showEditPhoto()"  size="small">
              <ion-icon name="create-outline"></ion-icon>
            </ion-fab-button>
            <ion-fab-button (click)="onUploadCanceled()" size="small">
              <ion-icon name="close"></ion-icon>
            </ion-fab-button>
           </ion-fab>     
         </ng-template>
          <!-- <ng-container *ngIf="downloadURL">
            <img (onload)="imgLoaded = true" [src]="downloadURL"  class="55">
          </ng-container> -->
          <!-- <ng-container *ngIf="!downloadURL"> -->
            <img #slideImgFile (load)="imgFileLoded(slideImgFile)" [src]="imgInfo.uploadTaskData.dataUri"/>
          <!-- </ng-container> -->
    
      
      </div> 
    </ng-container>
    <ng-template #elseTemplate>
      <div style="position: relative;">
        <ng-container  *ngIf="imgInfo.uploadTaskData.snapshot ; else noUploadYet">
         <ion-fab vertical="top" horizontal="center" edge slot="fixed">
          <ion-fab-button (click)="onUploadCanceled()" size="small">
            <ion-icon name="close"></ion-icon>
          </ion-fab-button>
        </ion-fab>     
        <div class="spin" *ngIf="!imgInfo.uploadTaskData.downloadURL">
          <ion-spinner name="circular"></ion-spinner>
        </div>    
        </ng-container>
        <ng-template #noUploadYet>
          <!-- <ion-fab vertical="top" horizontal="center" edge slot="fixed">
            <ion-fab-button (click)="startUpload()" size="small">
              <ion-icon name="cloud-upload-outline"></ion-icon>
            </ion-fab-button>
          </ion-fab>      -->
    
          <!-- <ion-fab vertical="top" horizontal="start" slot="fixed">
            <ion-fab-button>
              <ion-icon name="ellipsis-vertical-outline"></ion-icon>
            </ion-fab-button>
            <ion-fab-list side="top">
            <ion-fab-button (click)="startUpload()" size="small">
              <ion-icon name="cloud-upload-outline"></ion-icon>
            </ion-fab-button>
            <ion-fab-button (click)="showEditPhoto()"  size="small">
              <ion-icon name="create-outline"></ion-icon>
            </ion-fab-button>
            <ion-fab-button (click)="onUploadCanceled()" size="small">
              <ion-icon name="close"></ion-icon>
            </ion-fab-button>
            </ion-fab-list>
           </ion-fab>    -->
        </ng-template>
        
    
        <ion-thumbnail class="big-thumb" style="opacity: 0.6;">
          <!-- <ng-container *ngIf="downloadURL">
            <img (onload)="imgLoaded = true" [src]="downloadURL"  class="55">
          </ng-container> -->
          <!-- <ng-container *ngIf="!downloadURL"> -->
            <ion-img [src]="imgInfo.uploadTaskData.dataUri" class="44"></ion-img>
          <!-- </ng-container> -->
        </ion-thumbnail>
    
      
      </div> 
    </ng-template>
    
    
    </ng-container>
    
    <ion-modal #modal>
    
    <ng-template >
      <store-app-repository-image-crop-modal style="height: 100%;" [imgInfo]="imgInfo"></store-app-repository-image-crop-modal>
    </ng-template>
    </ion-modal>